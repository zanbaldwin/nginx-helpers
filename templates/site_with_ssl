server {
	listen 80;
	server_name {$root_domain_name} www.{$root_domain_name};
	server_tokens off;
	return 307 https://{$root_domain_name}$request_uri;
}

server {
	listen 443 ssl;
	server_name www.{$root_domain_name};
	server_tokens off;
	include generic_ssl;
	ssl_certificate /etc/ssl/private/{$root_domain_name}.crt;
	ssl_certificate_key /etc/ssl/private/{$root_domain_name}.key;
	return 307 https://{$root_domain_name}$request_uri;
}

server {
	listen 443 ssl;
	server_name {$root_domain_name}
	server_tokens off;

	error_log /home/webserver/.logs/{$root_domain_name}.error.log;
	access_log /home/webserver/.logs/{$root_domain_name}.access.log;

	include generic_ssl;
	ssl_certificate /etc/ssl/private/{$root_domain_name}.crt;
	ssl_certificate_key /etc/ssl/private/{$root_domain_name}.key;

	# Don't forget that some web applications might require something like
	# "/home/webserver/{$root_domain_name}/public_html" (for example, Symfony
	# uses the "web" sub-directory).
	root /home/webserver/{$root_domain_name};

	# The following demonstrates how you could have a sub-directory point to a
	# location, separate from the main application.
	# location /subdir/ {
	#     root /path/to/another/application;
	# }

	# Options are "basic_php" (for stuff like Wordpress, Chaser, etc) and
	# "symfony" (advanced configuration for Symfony applications).
	include helpers/basic_php;
}
